<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>VectorByte Dataset Access Script</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="https://www.vectorbyte.org" class="navbar-brand navbar-brand-logo">
    <img src="./graphics/vblogoedit.pdf" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule2023.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./materials.html">
 <span class="menu-text">Materials</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/VectorByteOrg/vectorbyte-training4"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/vectorbite_rcn"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#pulling-data-into-r-using-the-vectraits-api-application-programming-interface" id="toc-pulling-data-into-r-using-the-vectraits-api-application-programming-interface" class="nav-link active" data-scroll-target="#pulling-data-into-r-using-the-vectraits-api-application-programming-interface">Pulling data into <code>R</code> using the VecTraits API (Application Programming Interface)</a>
  <ul class="collapse">
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  <li><a href="#remove-unneeded-prefixes-from-column-names" id="toc-remove-unneeded-prefixes-from-column-names" class="nav-link" data-scroll-target="#remove-unneeded-prefixes-from-column-names">Remove unneeded prefixes from column names</a></li>
  </ul></li>
  <li><a href="#search-for-and-list-datasets-on-a-specific-genus" id="toc-search-for-and-list-datasets-on-a-specific-genus" class="nav-link" data-scroll-target="#search-for-and-list-datasets-on-a-specific-genus">Search for and list datasets on a specific genus</a>
  <ul class="collapse">
  <li><a href="#print-a-list-of-datasets-on-aedes-mosquitoes" id="toc-print-a-list-of-datasets-on-aedes-mosquitoes" class="nav-link" data-scroll-target="#print-a-list-of-datasets-on-aedes-mosquitoes">Print a list of datasets on <em>Aedes</em> mosquitoes</a></li>
  <li><a href="#other-options" id="toc-other-options" class="nav-link" data-scroll-target="#other-options">Other options</a></li>
  <li><a href="#retrieve-list-of-datasets-related-to-keyword" id="toc-retrieve-list-of-datasets-related-to-keyword" class="nav-link" data-scroll-target="#retrieve-list-of-datasets-related-to-keyword">Retrieve List of Datasets Related To Keyword</a></li>
  <li><a href="#retrieve-list-of-datasets-related-to-multiple-keywords" id="toc-retrieve-list-of-datasets-related-to-multiple-keywords" class="nav-link" data-scroll-target="#retrieve-list-of-datasets-related-to-multiple-keywords">Retrieve List of Datasets Related To Multiple Keywords</a></li>
  <li><a href="#retrieve-list-of-datasets-by-column-values" id="toc-retrieve-list-of-datasets-by-column-values" class="nav-link" data-scroll-target="#retrieve-list-of-datasets-by-column-values">Retrieve List of Datasets By Column Values</a></li>
  <li><a href="#the-pick-function" id="toc-the-pick-function" class="nav-link" data-scroll-target="#the-pick-function">The <code>pick()</code> Function</a></li>
  <li><a href="#access-dataframes-in-lists" id="toc-access-dataframes-in-lists" class="nav-link" data-scroll-target="#access-dataframes-in-lists">Access Dataframes In Lists</a></li>
  <li><a href="#access-data-in-dataframes" id="toc-access-data-in-dataframes" class="nav-link" data-scroll-target="#access-data-in-dataframes">Access Data In Dataframes</a></li>
  <li><a href="#minor-additional-functions" id="toc-minor-additional-functions" class="nav-link" data-scroll-target="#minor-additional-functions">Minor Additional Functions</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">VectorByte Dataset Access Script</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="pulling-data-into-r-using-the-vectraits-api-application-programming-interface" class="level2">
<h2 class="anchored" data-anchor-id="pulling-data-into-r-using-the-vectraits-api-application-programming-interface">Pulling data into <code>R</code> using the VecTraits API (Application Programming Interface)</h2>
<p>This section will cover: Retrieving data from the <a href="https://vectorbyte.crc.nd.edu/vectraits-explorer">VecTraits</a> database with the API</p>
<p>Load some packages and run some functions …</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(httr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(jsonlite)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>getWebData <span class="ot">&lt;-</span> <span class="cf">function</span>(dataURL) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="st">"httr"</span> <span class="sc">%in%</span> <span class="fu">installed.packages</span>()) {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Installing necessary httr library...</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">install.packages</span>(<span class="st">"httr"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="st">"jsonlite"</span> <span class="sc">%in%</span> <span class="fu">installed.packages</span>()) {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Installing necessary jsonlite library...</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">install.packages</span>(<span class="st">"jsonlite"</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">"webDataLibrariesOpen"</span>)) {</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(httr)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(jsonlite)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    webDataLibrariesOpen <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  webData <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="at">url =</span> dataURL)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">status_code</span>(webData) <span class="sc">&gt;=</span> <span class="dv">300</span> <span class="sc">||</span> <span class="fu">status_code</span>(webData) <span class="sc">&lt;</span> <span class="dv">200</span>) {</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    returnValue <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">message =</span> <span class="st">"Data fetch failed."</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">HTTPcode =</span> <span class="fu">status_code</span>(webData)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(returnValue)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  returnValue <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">content</span>(webData, <span class="st">"text"</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>),</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">flatten =</span> <span class="cn">TRUE</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(returnValue)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>getDataset <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">ID =</span> <span class="sc">-</span><span class="dv">1</span>) {</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>  totalDatasets <span class="ot">&lt;&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">getWebData</span>(<span class="st">"https://vectorbyte-qa.crc.nd.edu/portal/api/vectraits-explorer/?format=json"</span>)<span class="sc">$</span>data<span class="sc">$</span>count)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">as.integer</span>(ID) <span class="sc">&lt;=</span> totalDatasets <span class="sc">&amp;&amp;</span> <span class="fu">as.integer</span>(ID) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    datasetID <span class="ot">&lt;-</span> ID</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Sys.sleep</span>(<span class="fl">0.2</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>      datasetID <span class="ot">&lt;-</span> <span class="fu">readline</span>(<span class="at">prompt =</span> <span class="st">"Enter a dataset ID: "</span>)</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">as.integer</span>(datasetID) <span class="sc">&lt;=</span> totalDatasets <span class="sc">&amp;&amp;</span> <span class="fu">as.integer</span>(datasetID) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="st">"The dataset ID"</span>, datasetID, <span class="st">"is invalid or is out of range.</span><span class="sc">\n</span><span class="st">"</span>))</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="st">"Please choose a number between 1 and"</span>, totalDatasets, <span class="st">"</span><span class="sc">\b</span><span class="st">.</span><span class="sc">\n</span><span class="st">"</span>))</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  dataset <span class="ot">&lt;-</span> <span class="fu">getWebData</span>(</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://vectorbyte-qa.crc.nd.edu/portal/api/vectraits-dataset/"</span>,</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>        datasetID,</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        <span class="st">"/?format=json"</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>      <span class="at">collapse =</span> <span class="st">""</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">as.character</span>(dataset)[<span class="dv">1</span>] <span class="sc">==</span> <span class="st">"Data fetch failed."</span>) {</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Uh Oh!</span><span class="sc">\n</span><span class="st">An HTTP Error Occured and dataset"</span>, datasetID, <span class="st">"could not be retrieved.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"HTTP Error Code:"</span>, dataset<span class="sc">$</span>HTTPcode, <span class="st">"</span><span class="sc">\b\n\n</span><span class="st">"</span>)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(dataset)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>getDatasets <span class="ot">&lt;-</span> <span class="cf">function</span>(IDS, <span class="at">safety =</span> <span class="cn">TRUE</span>, <span class="at">l =</span> 50L) {</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="fl">0.2</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>  IDs <span class="ot">&lt;-</span> IDS</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(IDs) <span class="sc">&gt;</span> l) {</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"You may not retrieve more than"</span>, l, <span class="st">"datasets at a time.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Would you like to retrieve only the first 50 datasets?</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    answer <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">readline</span>())</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"y"</span>, answer) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"n"</span>, answer)) {</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>      IDs <span class="ot">&lt;-</span> IDs[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>]</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>()</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (safety <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(IDs) <span class="sc">&gt;</span> <span class="dv">50</span>) {</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Are you sure you want to retrieve all"</span>, <span class="fu">length</span>(IDs), <span class="st">"datasets?</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="st">"This would take about"</span>, <span class="fu">ceiling</span>(<span class="fu">length</span>(IDs) <span class="sc">/</span> <span class="dv">50</span>), <span class="st">"min.</span><span class="sc">\n</span><span class="st">"</span>))</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>    answer <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">readline</span>())</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="st">"This will take about"</span>, <span class="fu">ceiling</span>(<span class="dv">60</span> <span class="sc">*</span> <span class="fu">length</span>(IDs) <span class="sc">/</span> <span class="dv">50</span>), <span class="st">"seconds.</span><span class="sc">\n</span><span class="st">"</span>))</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>    answer <span class="ot">&lt;-</span> <span class="st">"y"</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"y"</span>, answer) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"n"</span>, answer)) {</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>    total <span class="ot">&lt;-</span> <span class="fu">length</span>(IDs)</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>    setNumber <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>    failedDatasets <span class="ot">&lt;&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>    datasets <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Retrieving datasets....</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (datasetID <span class="cf">in</span> IDs) {</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>      setNumber <span class="ot">&lt;-</span> setNumber <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>      <span class="fu">flush.console</span>()</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>      datasets[[setNumber]] <span class="ot">&lt;-</span> <span class="fu">getWebData</span>(</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste</span>(</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>          <span class="fu">c</span>(</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://vectorbyte-qa.crc.nd.edu/portal/api/vectraits-dataset/"</span>,</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.character</span>(datasetID),</span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>            <span class="st">"/?format=json"</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>          <span class="at">collapse =</span> <span class="st">""</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Remove previously displayed percentage:</span></span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="fu">paste</span>(</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"</span><span class="sc">\b</span><span class="st">"</span>, <span class="fu">nchar</span>(</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>          <span class="fu">as.character</span>(</span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>            (<span class="fu">floor</span>(<span class="dv">10000</span> <span class="sc">*</span> (setNumber <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> total) <span class="sc">/</span> <span class="dv">100</span>)</span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> <span class="dv">3</span>),</span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>        <span class="at">collapse =</span> <span class="st">""</span></span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Extend loading bar:</span></span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">as.character</span>(datasets[[setNumber]])[<span class="dv">1</span>] <span class="sc">==</span> <span class="st">"Data fetch failed."</span>) {</span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"X&gt; "</span>)</span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>        failedDatasets <span class="ot">&lt;-</span> <span class="fu">c</span>(failedDatasets, datasetID)</span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"=&gt; "</span>)</span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Display new percentage:</span></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="fu">as.character</span>(<span class="fu">floor</span>(<span class="dv">10000</span> <span class="sc">*</span> setNumber <span class="sc">/</span> total) <span class="sc">/</span> <span class="dv">100</span>), <span class="st">"</span><span class="sc">\b</span><span class="st">%"</span>)</span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\b\b\b\b\b\b</span><span class="st"> 100%</span><span class="sc">\n</span><span class="st">Data retrieval complete!</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(failedDatasets) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"The following"</span>, <span class="fu">length</span>(failedDatasets), <span class="st">"datasets contained HTTP errors and could not be retrieved:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>      <span class="fu">print</span>(failedDatasets)</span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(datasets)</span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>searchDatasets <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">KEYWORD =</span> <span class="st">""</span>, <span class="at">safety =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a>  keyword <span class="ot">&lt;-</span> KEYWORD</span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="fu">nchar</span>(keyword) <span class="sc">&lt;</span> <span class="dv">3</span>) {</span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="fl">0.2</span>)</span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>    keyword <span class="ot">&lt;-</span> <span class="fu">readline</span>(<span class="at">prompt =</span> <span class="st">"Enter a keyword to search for in all datasets: "</span>)</span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">nchar</span>(keyword) <span class="sc">&lt;</span> <span class="dv">3</span>) {</span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"Please enter a more descriptive keyword.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Searching Datasets....</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flush.console</span>()</span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>  setSearch <span class="ot">&lt;-</span> <span class="fu">getWebData</span>(</span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(</span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://vectorbyte.crc.nd.edu/portal/api/vectraits-explorer/?format=json&amp;keywords="</span>,</span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>        <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"%20"</span>, keyword)</span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>      <span class="at">collapse =</span> <span class="st">""</span></span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">as.character</span>(setSearch)[<span class="dv">1</span>] <span class="sc">==</span> <span class="st">"Data fetch failed."</span>) {</span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Uh Oh!</span><span class="sc">\n</span><span class="st">An HTTP error has occurred:"</span>, setSearch<span class="sc">$</span>HTTPcode, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"This could be because the search term you entered was too general (too many results).</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Please try again:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>    <span class="fu">searchDatasets</span>()</span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">length</span>(setSearch<span class="sc">$</span>ids), <span class="st">"relevant datasets found.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-161"><a href="#cb2-161" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">getDatasets</span>(setSearch<span class="sc">$</span>ids, safety))</span>
<span id="cb2-162"><a href="#cb2-162" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-163"><a href="#cb2-163" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-164"><a href="#cb2-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-165"><a href="#cb2-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-166"><a href="#cb2-166" aria-hidden="true" tabindex="-1"></a>searchDatasetsMulti <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">KEYWORDS =</span> <span class="fu">c</span>(), <span class="at">safety =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb2-167"><a href="#cb2-167" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(KEYWORDS) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb2-168"><a href="#cb2-168" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="fl">0.2</span>)</span>
<span id="cb2-169"><a href="#cb2-169" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Please enter a list of keywords to search for in the datasets:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-170"><a href="#cb2-170" aria-hidden="true" tabindex="-1"></a>    keywords <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb2-171"><a href="#cb2-171" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (<span class="fu">length</span>(keywords) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb2-172"><a href="#cb2-172" aria-hidden="true" tabindex="-1"></a>      keywords <span class="ot">&lt;-</span> <span class="fu">scan</span>(<span class="at">what =</span> <span class="st">""</span>)</span>
<span id="cb2-173"><a href="#cb2-173" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-174"><a href="#cb2-174" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-175"><a href="#cb2-175" aria-hidden="true" tabindex="-1"></a>    keywords <span class="ot">&lt;-</span> KEYWORDS</span>
<span id="cb2-176"><a href="#cb2-176" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-177"><a href="#cb2-177" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Searching Datasets....</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-178"><a href="#cb2-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flush.console</span>()</span>
<span id="cb2-179"><a href="#cb2-179" aria-hidden="true" tabindex="-1"></a>  setSearch <span class="ot">&lt;-</span> <span class="fu">getWebData</span>(</span>
<span id="cb2-180"><a href="#cb2-180" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(</span>
<span id="cb2-181"><a href="#cb2-181" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb2-182"><a href="#cb2-182" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://vectorbyte.crc.nd.edu/portal/api/vectraits-explorer/?format=json&amp;keywords="</span>,</span>
<span id="cb2-183"><a href="#cb2-183" aria-hidden="true" tabindex="-1"></a>        <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"%20"</span>, <span class="fu">paste</span>(keywords, <span class="at">collapse =</span> <span class="st">"%20"</span>))</span>
<span id="cb2-184"><a href="#cb2-184" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-185"><a href="#cb2-185" aria-hidden="true" tabindex="-1"></a>      <span class="at">collapse =</span> <span class="st">""</span></span>
<span id="cb2-186"><a href="#cb2-186" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-187"><a href="#cb2-187" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-188"><a href="#cb2-188" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">as.character</span>(setSearch)[<span class="dv">1</span>] <span class="sc">==</span> <span class="st">"Data fetch failed."</span>) {</span>
<span id="cb2-189"><a href="#cb2-189" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Uh Oh!</span><span class="sc">\n</span><span class="st">An HTTP error has occurred:"</span>, setSearch<span class="sc">$</span>HTTPcode, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-190"><a href="#cb2-190" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"This could be because the search term you entered had too many results.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-191"><a href="#cb2-191" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"This could also be because the search term you entered had no results.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-192"><a href="#cb2-192" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Please try again:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-193"><a href="#cb2-193" aria-hidden="true" tabindex="-1"></a>    <span class="fu">searchDatasetsMulti</span>()</span>
<span id="cb2-194"><a href="#cb2-194" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-195"><a href="#cb2-195" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">length</span>(setSearch<span class="sc">$</span>ids), <span class="st">"relevant datasets found.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-196"><a href="#cb2-196" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">getDatasets</span>(setSearch<span class="sc">$</span>ids, safety))</span>
<span id="cb2-197"><a href="#cb2-197" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a>smartSearch <span class="ot">&lt;-</span> <span class="cf">function</span>(VARIABLE_NAME, VARIABLE_VALUE, <span class="at">OPERATOR =</span> <span class="st">"contains"</span>, <span class="at">safety =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a>  operator <span class="ot">&lt;-</span> <span class="fu">tolower</span>(OPERATOR)</span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (operator <span class="sc">!=</span> <span class="st">"contains"</span>) {</span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (operator <span class="sc">==</span> <span class="st">"contain"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"has"</span>) { operator <span class="ot">&lt;-</span> <span class="st">"contains"</span> }</span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (operator <span class="sc">==</span> <span class="st">"!contain"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"!contains"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"!has"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"!have"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"does not contain"</span>) { operator <span class="ot">&lt;-</span> <span class="st">"ncontains"</span> }</span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (operator <span class="sc">==</span> <span class="st">"="</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"=="</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"equal"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"equals"</span>) { operator <span class="ot">&lt;-</span> <span class="st">"eq"</span> }</span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (operator <span class="sc">==</span> <span class="st">"!="</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"not"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"!equal"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"!equals"</span>) { operator <span class="ot">&lt;-</span> <span class="st">"neq"</span> }</span>
<span id="cb2-208"><a href="#cb2-208" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (operator <span class="sc">==</span> <span class="st">"starts with"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"start with"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"starts"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"start"</span>) { operator <span class="ot">&lt;-</span> <span class="st">"sw"</span> }</span>
<span id="cb2-209"><a href="#cb2-209" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (operator <span class="sc">==</span> <span class="st">"not start with"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"!start"</span> <span class="sc">||</span> operator <span class="sc">==</span> <span class="st">"!starts"</span>) { operator <span class="ot">&lt;-</span> <span class="st">"nsw"</span> }</span>
<span id="cb2-210"><a href="#cb2-210" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-211"><a href="#cb2-211" aria-hidden="true" tabindex="-1"></a>  variable_name <span class="ot">&lt;-</span> VARIABLE_NAME</span>
<span id="cb2-212"><a href="#cb2-212" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">tolower</span>(variable_name) <span class="sc">==</span> <span class="st">"genus"</span>) { variable_name <span class="ot">&lt;-</span> <span class="st">"Interactor1Genus"</span> }</span>
<span id="cb2-213"><a href="#cb2-213" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">tolower</span>(variable_name) <span class="sc">==</span> <span class="st">"species"</span>) { variable_name <span class="ot">&lt;-</span> <span class="st">"Interactor1Species"</span> }</span>
<span id="cb2-214"><a href="#cb2-214" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">tolower</span>(variable_name) <span class="sc">==</span> <span class="st">"gender"</span>) { variable_name <span class="ot">&lt;-</span> <span class="st">"Interactor1Sex"</span> }</span>
<span id="cb2-215"><a href="#cb2-215" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">tolower</span>(variable_name) <span class="sc">==</span> <span class="st">"who"</span>) { variable_name <span class="ot">&lt;-</span> <span class="st">"SubmittedBy"</span> }</span>
<span id="cb2-216"><a href="#cb2-216" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">tolower</span>(variable_name) <span class="sc">==</span> <span class="st">"stage"</span>) { variable_name <span class="ot">&lt;-</span> <span class="st">"Interactor1Stage"</span> }</span>
<span id="cb2-217"><a href="#cb2-217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Searching Datasets....</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-218"><a href="#cb2-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flush.console</span>()</span>
<span id="cb2-219"><a href="#cb2-219" aria-hidden="true" tabindex="-1"></a>  setSearch <span class="ot">&lt;-</span> <span class="fu">getWebData</span>(</span>
<span id="cb2-220"><a href="#cb2-220" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(</span>
<span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://vectorbyte.crc.nd.edu/portal/api/vectraits-explorer/?format=json&amp;field="</span>,</span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a>        <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"%20"</span>, variable_name),</span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a>        <span class="st">"&amp;operator="</span>,</span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a>        operator,</span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a>        <span class="st">"&amp;term="</span>,</span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a>        <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"%20"</span>, VARIABLE_VALUE)</span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a>      <span class="at">collapse =</span> <span class="st">""</span></span>
<span id="cb2-230"><a href="#cb2-230" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-231"><a href="#cb2-231" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-232"><a href="#cb2-232" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">as.character</span>(setSearch)[<span class="dv">1</span>] <span class="sc">==</span> <span class="st">"Data fetch failed."</span>) {</span>
<span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (setSearch<span class="sc">$</span>HTTPcode <span class="sc">==</span> <span class="dv">400</span>) {</span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"Uh Oh!</span><span class="sc">\n</span><span class="st">The server does not wish to fulfill your request.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-235"><a href="#cb2-235" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"This could be because you included unsupported/reserved URL characters, such as:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-236"><a href="#cb2-236" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">", ! @ # $ % ^ &amp; : ; </span><span class="sc">\\</span><span class="st"> </span><span class="sc">\"</span><span class="st"> ' ? / &lt; &gt; emojis etc.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-237"><a href="#cb2-237" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"This could also be because too many results matched your search.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-238"><a href="#cb2-238" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"(Don't search for </span><span class="sc">\"</span><span class="st">Animalia</span><span class="sc">\"</span><span class="st"> in </span><span class="sc">\"</span><span class="st">Interactor1Kingdom</span><span class="sc">\"</span><span class="st">, for example.)</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-239"><a href="#cb2-239" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"This could also be because you used the incorrect capitalization in the variable name entry.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-240"><a href="#cb2-240" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (OPERATOR <span class="sc">!=</span> <span class="st">"contains"</span>) {</span>
<span id="cb2-241"><a href="#cb2-241" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"This could also very likely be because the operator you entered is not supported.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-242"><a href="#cb2-242" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"The following operators are supported by the server:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-243"><a href="#cb2-243" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"contains, ncontains, eq (equals), neq (not equal to), sw (starts with),</span><span class="sc">\n</span><span class="st">nsw (doesn't start with), in, nin</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-244"><a href="#cb2-244" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-245"><a href="#cb2-245" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-246"><a href="#cb2-246" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"Uh Oh!</span><span class="sc">\n</span><span class="st">An HTTP error has occurred:"</span>, setSearch<span class="sc">$</span>HTTPcode, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-247"><a href="#cb2-247" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (setSearch<span class="sc">$</span>HTTPcode <span class="sc">==</span> <span class="dv">404</span>) {</span>
<span id="cb2-248"><a href="#cb2-248" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"The most likely reason for this is that no results matched your search."</span>)</span>
<span id="cb2-249"><a href="#cb2-249" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-250"><a href="#cb2-250" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-251"><a href="#cb2-251" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-252"><a href="#cb2-252" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">length</span>(setSearch<span class="sc">$</span>ids), <span class="st">"relevant datasets found.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-253"><a href="#cb2-253" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">getDatasets</span>(setSearch<span class="sc">$</span>ids, safety))</span>
<span id="cb2-254"><a href="#cb2-254" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-255"><a href="#cb2-255" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-256"><a href="#cb2-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-257"><a href="#cb2-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-258"><a href="#cb2-258" aria-hidden="true" tabindex="-1"></a>sciName <span class="ot">&lt;-</span> <span class="cf">function</span>(DATASET) {</span>
<span id="cb2-259"><a href="#cb2-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">paste</span>(</span>
<span id="cb2-260"><a href="#cb2-260" aria-hidden="true" tabindex="-1"></a>    DATASET<span class="sc">$</span>results<span class="sc">$</span>Interactor1Genus[<span class="dv">1</span>],</span>
<span id="cb2-261"><a href="#cb2-261" aria-hidden="true" tabindex="-1"></a>    DATASET<span class="sc">$</span>results<span class="sc">$</span>Interactor1Species[<span class="dv">1</span>]</span>
<span id="cb2-262"><a href="#cb2-262" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb2-263"><a href="#cb2-263" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-264"><a href="#cb2-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-265"><a href="#cb2-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-266"><a href="#cb2-266" aria-hidden="true" tabindex="-1"></a>datasetRows <span class="ot">&lt;-</span> <span class="cf">function</span>(DATASET) {</span>
<span id="cb2-267"><a href="#cb2-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">length</span>(DATASET<span class="sc">$</span>results<span class="sc">$</span>DatasetID))</span>
<span id="cb2-268"><a href="#cb2-268" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-269"><a href="#cb2-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-270"><a href="#cb2-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-271"><a href="#cb2-271" aria-hidden="true" tabindex="-1"></a>datasetColumns <span class="ot">&lt;-</span> <span class="cf">function</span>(DATASET) {</span>
<span id="cb2-272"><a href="#cb2-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">length</span>(DATASET<span class="sc">$</span>results[<span class="dv">1</span>,]))</span>
<span id="cb2-273"><a href="#cb2-273" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-274"><a href="#cb2-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-275"><a href="#cb2-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-276"><a href="#cb2-276" aria-hidden="true" tabindex="-1"></a>datasetSummary <span class="ot">&lt;-</span> <span class="cf">function</span>(DATASET) {</span>
<span id="cb2-277"><a href="#cb2-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste</span>(</span>
<span id="cb2-278"><a href="#cb2-278" aria-hidden="true" tabindex="-1"></a>    <span class="fu">toupper</span>(DATASET<span class="sc">$</span>results<span class="sc">$</span>OriginalTraitDef[<span class="dv">1</span>]),</span>
<span id="cb2-279"><a href="#cb2-279" aria-hidden="true" tabindex="-1"></a>    <span class="st">"in"</span>,</span>
<span id="cb2-280"><a href="#cb2-280" aria-hidden="true" tabindex="-1"></a>    <span class="fu">toupper</span>(DATASET<span class="sc">$</span>results<span class="sc">$</span>OriginalTraitUnit[<span class="dv">1</span>]),</span>
<span id="cb2-281"><a href="#cb2-281" aria-hidden="true" tabindex="-1"></a>    <span class="st">"</span><span class="sc">\b</span><span class="st">:</span><span class="sc">\n</span><span class="st">"</span></span>
<span id="cb2-282"><a href="#cb2-282" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb2-283"><a href="#cb2-283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">summary</span>(DATASET<span class="sc">$</span>results<span class="sc">$</span>OriginalTraitValue))</span>
<span id="cb2-284"><a href="#cb2-284" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(DATASET<span class="sc">$</span>results<span class="sc">$</span>Interactor1Common[<span class="dv">1</span>])) {</span>
<span id="cb2-285"><a href="#cb2-285" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Experiments done on"</span>, DATASET<span class="sc">$</span>results<span class="sc">$</span>Interactor1Common[<span class="dv">1</span>])</span>
<span id="cb2-286"><a href="#cb2-286" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.na</span>(DATASET<span class="sc">$</span>results<span class="sc">$</span>Interactor2Common[<span class="dv">1</span>])) {</span>
<span id="cb2-287"><a href="#cb2-287" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"s.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-288"><a href="#cb2-288" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-289"><a href="#cb2-289" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="fu">paste</span>(</span>
<span id="cb2-290"><a href="#cb2-290" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb2-291"><a href="#cb2-291" aria-hidden="true" tabindex="-1"></a>          <span class="st">"s and "</span>,</span>
<span id="cb2-292"><a href="#cb2-292" aria-hidden="true" tabindex="-1"></a>          DATASET<span class="sc">$</span>results<span class="sc">$</span>Interactor2Common[<span class="dv">1</span>],</span>
<span id="cb2-293"><a href="#cb2-293" aria-hidden="true" tabindex="-1"></a>          <span class="st">"s.</span><span class="sc">\n</span><span class="st">"</span></span>
<span id="cb2-294"><a href="#cb2-294" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb2-295"><a href="#cb2-295" aria-hidden="true" tabindex="-1"></a>        <span class="at">collapse =</span> <span class="st">""</span></span>
<span id="cb2-296"><a href="#cb2-296" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb2-297"><a href="#cb2-297" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-298"><a href="#cb2-298" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-299"><a href="#cb2-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">datasetRows</span>(DATASET), <span class="st">"samples total.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-300"><a href="#cb2-300" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-301"><a href="#cb2-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-302"><a href="#cb2-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-303"><a href="#cb2-303" aria-hidden="true" tabindex="-1"></a>pick <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">SELECTION =</span> <span class="dv">0</span>) {</span>
<span id="cb2-304"><a href="#cb2-304" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (SELECTION <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb2-305"><a href="#cb2-305" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"MENU:</span><span class="sc">\n</span><span class="st"> [1] Retrieve dataset by ID</span><span class="sc">\n</span><span class="st"> [2] Retrieve datasets by IDs</span><span class="sc">\n</span><span class="st"> [3] Search for datasets by keyword</span><span class="sc">\n</span><span class="st"> [4] Search for datasets by list of keywords</span><span class="sc">\n</span><span class="st"> [5] Search for datasets by variable and value</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-306"><a href="#cb2-306" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="fl">0.25</span>)</span>
<span id="cb2-307"><a href="#cb2-307" aria-hidden="true" tabindex="-1"></a>    answer <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">readline</span>(<span class="at">prompt =</span> <span class="st">"Enter a number from the menu above to select it. "</span>))</span>
<span id="cb2-308"><a href="#cb2-308" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-309"><a href="#cb2-309" aria-hidden="true" tabindex="-1"></a>    answer <span class="ot">&lt;-</span> SELECTION</span>
<span id="cb2-310"><a href="#cb2-310" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-311"><a href="#cb2-311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="fl">0.25</span>)</span>
<span id="cb2-312"><a href="#cb2-312" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (answer <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb2-313"><a href="#cb2-313" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">getDataset</span>())</span>
<span id="cb2-314"><a href="#cb2-314" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-315"><a href="#cb2-315" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (answer <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb2-316"><a href="#cb2-316" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Enter a list of dataset IDs below.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-317"><a href="#cb2-317" aria-hidden="true" tabindex="-1"></a>    datasetIDs <span class="ot">&lt;-</span> <span class="fu">scan</span>(<span class="at">what =</span> <span class="fu">integer</span>())</span>
<span id="cb2-318"><a href="#cb2-318" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">getDatasets</span>(datasetIDs))</span>
<span id="cb2-319"><a href="#cb2-319" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-320"><a href="#cb2-320" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (answer <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb2-321"><a href="#cb2-321" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">searchDatasets</span>())</span>
<span id="cb2-322"><a href="#cb2-322" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-323"><a href="#cb2-323" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (answer <span class="sc">==</span> <span class="dv">4</span>) {</span>
<span id="cb2-324"><a href="#cb2-324" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">searchDatasetsMulti</span>())</span>
<span id="cb2-325"><a href="#cb2-325" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-326"><a href="#cb2-326" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (answer <span class="sc">==</span> <span class="dv">5</span>) {</span>
<span id="cb2-327"><a href="#cb2-327" aria-hidden="true" tabindex="-1"></a>    vname <span class="ot">&lt;-</span> <span class="fu">readline</span>(<span class="at">prompt =</span> <span class="st">"Variable Name: "</span>)</span>
<span id="cb2-328"><a href="#cb2-328" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="fl">0.2</span>)</span>
<span id="cb2-329"><a href="#cb2-329" aria-hidden="true" tabindex="-1"></a>    vval <span class="ot">&lt;-</span> <span class="fu">readline</span>(<span class="at">prompt =</span> <span class="st">"Variable Value: "</span>)</span>
<span id="cb2-330"><a href="#cb2-330" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">smartSearch</span>(vname, vval))</span>
<span id="cb2-331"><a href="#cb2-331" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-332"><a href="#cb2-332" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="examples" class="level3">
<h3 class="anchored" data-anchor-id="examples">Examples</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dataset50 <span class="ot">&lt;-</span> <span class="fu">getDataset</span>(<span class="dv">50</span>) <span class="co"># Get dataset with ID 50</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dataset50)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$results
     Id DatasetID IndividualID OriginalID OriginalTraitName
1 81848        50                  PHX261    fecundity rate
2 81849        50                  PHX261    fecundity rate
3 81850        50                  PHX261    fecundity rate
4 81851        50                  PHX261    fecundity rate
5 81852        50                  PHX261    fecundity rate
              OriginalTraitDef StandardisedTraitName StandardisedTraitDef
1 mean eggs individual-1 day-1                    NA                   NA
2 mean eggs individual-1 day-1                    NA                   NA
3 mean eggs individual-1 day-1                    NA                   NA
4 mean eggs individual-1 day-1                    NA                   NA
5 mean eggs individual-1 day-1                    NA                   NA
  OriginalTraitValue       OriginalTraitUnit OriginalErrorPos OriginalErrorNeg
1                3.0 eggs individual-1 day-1             51.7             51.7
2                6.3 eggs individual-1 day-1             33.4             33.4
3                9.6 eggs individual-1 day-1             36.3             36.3
4               12.5 eggs individual-1 day-1             45.7             45.7
5                5.8 eggs individual-1 day-1             75.2             75.2
        OriginalErrorUnit StandardisedTraitValue StandardisedTraitUnit
1 coefficient of variance                     NA                    NA
2 coefficient of variance                     NA                    NA
3 coefficient of variance                     NA                    NA
4 coefficient of variance                     NA                    NA
5 coefficient of variance                     NA                    NA
  StandardisedErrorPos StandardisedErrorNeg StandardisedErrorUnit Replicates
1                   NA                   NA                    NA         NA
2                   NA                   NA                    NA         NA
3                   NA                   NA                    NA         NA
4                   NA                   NA                    NA         NA
5                   NA                   NA                    NA         NA
      Habitat   LabField ArenaValue ArenaUnit ArenaValueSI ArenaUnitSI
1 terrestrial laboratory         NA        NA           NA          NA
2 terrestrial laboratory         NA        NA           NA          NA
3 terrestrial laboratory         NA        NA           NA          NA
4 terrestrial laboratory         NA        NA           NA          NA
5 terrestrial laboratory         NA        NA           NA          NA
  AmbientTemp AmbientTempMethod AmbientTempUnit AmbientLight AmbientLightUnit
1          NA                NA              NA           NA               NA
2          NA                NA              NA           NA               NA
3          NA                NA              NA           NA               NA
4          NA                NA              NA           NA               NA
5          NA                NA              NA           NA               NA
  SecondStressor SecondStressorDef SecondStressorValue SecondStressorUnit
1             NA                NA                  NA                 NA
2             NA                NA                  NA                 NA
3             NA                NA                  NA                 NA
4             NA                NA                  NA                 NA
5             NA                NA                  NA                 NA
  TimeStart TimeEnd TotalObsTimeValue TotalObsTimeUnit TotalObsTimeValueSI
1        NA      NA                NA               NA                  NA
2        NA      NA                NA               NA                  NA
3        NA      NA                NA               NA                  NA
4        NA      NA                NA               NA                  NA
5        NA      NA                NA               NA                  NA
  TotalObsTimeUnitSI TotalObsTimeNotes ResRepValue ResRepUnit ResRepValueSI
1                 NA                NA          NA         NA            NA
2                 NA                NA          NA         NA            NA
3                 NA                NA          NA         NA            NA
4                 NA                NA          NA         NA            NA
5                 NA                NA          NA         NA            NA
  ResRepUnitSI    LocationText LocationType OriginalLocationDate LocationDate
1           NA Dryden New York           NA                   NA   1974-01-06
2           NA Dryden New York           NA                   NA   1974-01-06
3           NA Dryden New York           NA                   NA   1974-01-06
4           NA Dryden New York           NA                   NA   1974-01-06
5           NA Dryden New York           NA                   NA   1974-01-06
  LocationDatePrecision CoordinateType Latitude Longitude         Interactor1
1                     3        decimal 42.48917 -76.35972 Sepedon fuscipennis
2                     3        decimal 42.48917 -76.35972 Sepedon fuscipennis
3                     3        decimal 42.48917 -76.35972 Sepedon fuscipennis
4                     3        decimal 42.48917 -76.35972 Sepedon fuscipennis
5                     3        decimal 42.48917 -76.35972 Sepedon fuscipennis
  Interactor1Common Interactor1Wholepart Interactor1WholePartType
1         Marsh fly                   NA                       NA
2         Marsh fly                   NA                       NA
3         Marsh fly                   NA                       NA
4         Marsh fly                   NA                       NA
5         Marsh fly                   NA                       NA
  Interactor1Number Interactor1Kingdom Interactor1Phylum Interactor1Class
1                17           Animalia        Arthropoda          Insecta
2                59           Animalia        Arthropoda          Insecta
3                54           Animalia        Arthropoda          Insecta
4                52           Animalia        Arthropoda          Insecta
5                24           Animalia        Arthropoda          Insecta
  Interactor1Order Interactor1Family Interactor1Genus Interactor1Species
1          Diptera       Sciomyzidae          Sepedon        fuscipennis
2          Diptera       Sciomyzidae          Sepedon        fuscipennis
3          Diptera       Sciomyzidae          Sepedon        fuscipennis
4          Diptera       Sciomyzidae          Sepedon        fuscipennis
5          Diptera       Sciomyzidae          Sepedon        fuscipennis
  Interactor1Stage Interactor1Sex Interactor1Temp Interactor1TempUnit
1            adult         female              15             Celsius
2            adult         female              21             Celsius
3            adult         female              26             Celsius
4            adult         female              30             Celsius
5            adult         female              33             Celsius
  Interactor1TempMethod Interactor1GrowthTemp Interactor1GrowthTempUnit
1                    NA                    NA                        NA
2                    NA                    NA                        NA
3                    NA                    NA                        NA
4                    NA                    NA                        NA
5                    NA                    NA                        NA
  Interactor1GrowthDur Interactor1GrowthdDurUnit Interactor1GrowthType
1                   NA                        NA                    NA
2                   NA                        NA                    NA
3                   NA                        NA                    NA
4                   NA                        NA                    NA
5                   NA                        NA                    NA
  Interactor1Acc Interactor1AccTemp Interactor1AccTempNotes Interactor1AccTime
1             NA                 NA                      NA                 NA
2             NA                 NA                      NA                 NA
3             NA                 NA                      NA                 NA
4             NA                 NA                      NA                 NA
5             NA                 NA                      NA                 NA
  Interactor1AccTimeNotes Interactor1AccTimeUnit Interactor1OrigTemp
1                      NA                     NA                  NA
2                      NA                     NA                  NA
3                      NA                     NA                  NA
4                      NA                     NA                  NA
5                      NA                     NA                  NA
  Interactor1OrigTempNotes Interactor1OrigTime Interactor1OrigTimeNotes
1                       NA                  NA                       NA
2                       NA                  NA                       NA
3                       NA                  NA                       NA
4                       NA                  NA                       NA
5                       NA                  NA                       NA
  Interactor1OrigTimeUnit Interactor1EquilibTimeValue
1                      NA                          NA
2                      NA                          NA
3                      NA                          NA
4                      NA                          NA
5                      NA                          NA
  Interactor1EquilibTimeUnit Interactor1Size Interactor1SizeUnit
1                         NA              NA                  NA
2                         NA              NA                  NA
3                         NA              NA                  NA
4                         NA              NA                  NA
5                         NA              NA                  NA
  Interactor1SizeType Interactor1SizeSI Interactor1SizeUnitSI
1                  NA                NA                    NA
2                  NA                NA                    NA
3                  NA                NA                    NA
4                  NA                NA                    NA
5                  NA                NA                    NA
  Interactor1DenValue Interactor1DenUnit Interactor1DenTypeSI
1                  NA                 NA                   NA
2                  NA                 NA                   NA
3                  NA                 NA                   NA
4                  NA                 NA                   NA
5                  NA                 NA                   NA
  Interactor1DenValueSI Interactor1DenUnitSI Interactor1MassValueSI
1                    NA                   NA                     NA
2                    NA                   NA                     NA
3                    NA                   NA                     NA
4                    NA                   NA                     NA
5                    NA                   NA                     NA
  Interactor1MassUnitSI Interactor2 Interactor2Common Interactor2Kingdom
1                    NA   None None                NA                 NA
2                    NA   None None                NA                 NA
3                    NA   None None                NA                 NA
4                    NA   None None                NA                 NA
5                    NA   None None                NA                 NA
  Interactor2Phylum Interactor2Class Interactor2Order Interactor2Family
1                NA               NA               NA                NA
2                NA               NA               NA                NA
3                NA               NA               NA                NA
4                NA               NA               NA                NA
5                NA               NA               NA                NA
  Interactor2Genus Interactor2Species Interactor2Stage Interactor2Sex
1               NA                 NA               NA             NA
2               NA                 NA               NA             NA
3               NA                 NA               NA             NA
4               NA                 NA               NA             NA
5               NA                 NA               NA             NA
  Interactor2Temp Interactor2TempUnit Interactor2TempMethod
1              NA                  NA                    NA
2              NA                  NA                    NA
3              NA                  NA                    NA
4              NA                  NA                    NA
5              NA                  NA                    NA
  Interactor2GrowthTemp Interactor2GrowthTempUnit Interactor2GrowthDur
1                    NA                        NA                   NA
2                    NA                        NA                   NA
3                    NA                        NA                   NA
4                    NA                        NA                   NA
5                    NA                        NA                   NA
  Interactor2GrowthDurUnit Interactor2GrowthType Interactor2Acc
1                       NA                    NA             NA
2                       NA                    NA             NA
3                       NA                    NA             NA
4                       NA                    NA             NA
5                       NA                    NA             NA
  Interactor2AccTemp Interactor2AccTempNotes Interactor2AccTime
1                 NA                      NA                 NA
2                 NA                      NA                 NA
3                 NA                      NA                 NA
4                 NA                      NA                 NA
5                 NA                      NA                 NA
  Interactor2AccTimeNotes Interactor2AccTimeUnit Interactor2OrigTemp
1                      NA                     NA                  NA
2                      NA                     NA                  NA
3                      NA                     NA                  NA
4                      NA                     NA                  NA
5                      NA                     NA                  NA
  Interactor2OrigTempNotes Interactor2OrigTime Interactor2OrigTimeNotes
1                       NA                  NA                       NA
2                       NA                  NA                       NA
3                       NA                  NA                       NA
4                       NA                  NA                       NA
5                       NA                  NA                       NA
  Interactor2OrigTimeUnit Interactor2EquilibTimeValue
1                      NA                          NA
2                      NA                          NA
3                      NA                          NA
4                      NA                          NA
5                      NA                          NA
  Interactor2EquilibTimeUnit Interactor2Size Interactor2SizeUnit
1                         NA              NA                  NA
2                         NA              NA                  NA
3                         NA              NA                  NA
4                         NA              NA                  NA
5                         NA              NA                  NA
  Interactor2SizeType Interactor2SizeSI Interactor2SizeUnitSI
1                  NA                NA                    NA
2                  NA                NA                    NA
3                  NA                NA                    NA
4                  NA                NA                    NA
5                  NA                NA                    NA
  Interactor2DenValue Interactor2DenUnit Interactor2DenTypeSI
1                  NA                 NA                   NA
2                  NA                 NA                   NA
3                  NA                 NA                   NA
4                  NA                 NA                   NA
5                  NA                 NA                   NA
  Interactor2DenValueSI Interactor2DenUnitSI Interactor2MassValueSI
1                    NA                   NA                     NA
2                    NA                   NA                     NA
3                    NA                   NA                     NA
4                    NA                   NA                     NA
5                    NA                   NA                     NA
  Interactor2MassUnitSI PhysicalProcess PhysicalProcess_1 PhysicalProcess_2
1                    NA              NA                NA                NA
2                    NA              NA                NA                NA
3                    NA              NA                NA                NA
4                    NA              NA                NA                NA
5                    NA              NA                NA                NA
  FigureTable
1     table 1
2     table 1
3     table 1
4     table 1
5     table 1
                                                                                                                                                                                     Citation
1 Barnes 1976. Effect of temperature on development survival oviposition and diapause in laboratory populations of Sepedon fuscipennis (Diptera: Sciomyzidae). Environ. Entomol. 5: 1089-1098
2 Barnes 1976. Effect of temperature on development survival oviposition and diapause in laboratory populations of Sepedon fuscipennis (Diptera: Sciomyzidae). Environ. Entomol. 5: 1089-1098
3 Barnes 1976. Effect of temperature on development survival oviposition and diapause in laboratory populations of Sepedon fuscipennis (Diptera: Sciomyzidae). Environ. Entomol. 5: 1089-1098
4 Barnes 1976. Effect of temperature on development survival oviposition and diapause in laboratory populations of Sepedon fuscipennis (Diptera: Sciomyzidae). Environ. Entomol. 5: 1089-1098
5 Barnes 1976. Effect of temperature on development survival oviposition and diapause in laboratory populations of Sepedon fuscipennis (Diptera: Sciomyzidae). Environ. Entomol. 5: 1089-1098
  CuratedByCitation CuratedByDOI                 DOI SubmittedBy
1                NA           NA 10.1093/ee/5.6.1089 Paul Huxley
2                NA           NA 10.1093/ee/5.6.1089 Paul Huxley
3                NA           NA 10.1093/ee/5.6.1089 Paul Huxley
4                NA           NA 10.1093/ee/5.6.1089 Paul Huxley
5                NA           NA 10.1093/ee/5.6.1089 Paul Huxley
  ContributorEmail Notes DefaultChartXaxis DefaultChartCategory
1 phuxly@gmail.com    NA   Interactor1Temp         LocationText
2 phuxly@gmail.com    NA   Interactor1Temp         LocationText
3 phuxly@gmail.com    NA   Interactor1Temp         LocationText
4 phuxly@gmail.com    NA   Interactor1Temp         LocationText
5 phuxly@gmail.com    NA   Interactor1Temp         LocationText</code></pre>
</div>
</div>
<p><br></p>
<p>Get a list of datasets by their ID numbers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">getDatasets</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>This will take about 12 seconds.
Retrieving datasets....
=&gt; 10 %=&gt; 20 %=&gt; 30 %=&gt; 40 %=&gt; 50 %=&gt; 60 %=&gt; 70 %=&gt; 80 %=&gt; 90 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
</div>
<p><br> Use <code>do.call</code> and <code>lapply</code> to create a single dataframe containing all of the datasets you pulled in the previous step:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>datasets1to10 <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind,<span class="fu">lapply</span>(list_of_dataframes, data.frame, <span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>))</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datasets1to10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  results.Id results.DatasetID results.IndividualID results.OriginalID
1      81518                 1                                  PHX801
2      81519                 1                                  PHX801
3      81520                 1                                  PHX801
4      81521                 1                                  PHX801
5      81522                 1                                  PHX801
6      81523                 2                                  PHX802
  results.OriginalTraitName    results.OriginalTraitDef
1          development time mean duration of life stage
2          development time mean duration of life stage
3          development time mean duration of life stage
4          development time mean duration of life stage
5          development time mean duration of life stage
6                 fecundity     mean lifetime offspring
  results.StandardisedTraitName results.StandardisedTraitDef
1                            NA                           NA
2                            NA                           NA
3                            NA                           NA
4                            NA                           NA
5                            NA                           NA
6                            NA                           NA
  results.OriginalTraitValue results.OriginalTraitUnit results.OriginalErrorPos
1                       21.3                      days                     0.31
2                       12.2                      days                     0.23
3                        8.3                      days                     0.16
4                        6.7                      days                     0.16
5                        6.5                      days                     0.26
6                       51.5    offspring individual-1                     3.93
  results.OriginalErrorNeg results.OriginalErrorUnit
1                     0.31                        se
2                     0.23                        se
3                     0.16                        se
4                     0.16                        se
5                     0.26                        se
6                     3.93                        se
  results.StandardisedTraitValue results.StandardisedTraitUnit
1                             NA                            NA
2                             NA                            NA
3                             NA                            NA
4                             NA                            NA
5                             NA                            NA
6                             NA                            NA
  results.StandardisedErrorPos results.StandardisedErrorNeg
1                           NA                           NA
2                           NA                           NA
3                           NA                           NA
4                           NA                           NA
5                           NA                           NA
6                           NA                           NA
  results.StandardisedErrorUnit results.Replicates results.Habitat
1                            NA                 NA     terrestrial
2                            NA                 NA     terrestrial
3                            NA                 NA     terrestrial
4                            NA                 NA     terrestrial
5                            NA                 NA     terrestrial
6                            NA                 NA     terrestrial
  results.LabField results.ArenaValue results.ArenaUnit results.ArenaValueSI
1       laboratory                 NA                NA                   NA
2       laboratory                 NA                NA                   NA
3       laboratory                 NA                NA                   NA
4       laboratory                 NA                NA                   NA
5       laboratory                 NA                NA                   NA
6       laboratory                 NA                NA                   NA
  results.ArenaUnitSI results.AmbientTemp results.AmbientTempMethod
1                  NA                  NA                        NA
2                  NA                  NA                        NA
3                  NA                  NA                        NA
4                  NA                  NA                        NA
5                  NA                  NA                        NA
6                  NA                  NA                        NA
  results.AmbientTempUnit results.AmbientLight results.AmbientLightUnit
1                      NA                   NA                       NA
2                      NA                   NA                       NA
3                      NA                   NA                       NA
4                      NA                   NA                       NA
5                      NA                   NA                       NA
6                      NA                   NA                       NA
  results.SecondStressor results.SecondStressorDef results.SecondStressorValue
1                     NA                        NA                          NA
2                     NA                        NA                          NA
3                     NA                        NA                          NA
4                     NA                        NA                          NA
5                     NA                        NA                          NA
6                     NA                        NA                          NA
  results.SecondStressorUnit results.TimeStart results.TimeEnd
1                         NA                NA              NA
2                         NA                NA              NA
3                         NA                NA              NA
4                         NA                NA              NA
5                         NA                NA              NA
6                         NA                NA              NA
  results.TotalObsTimeValue results.TotalObsTimeUnit
1                        NA                       NA
2                        NA                       NA
3                        NA                       NA
4                        NA                       NA
5                        NA                       NA
6                        NA                       NA
  results.TotalObsTimeValueSI results.TotalObsTimeUnitSI
1                          NA                         NA
2                          NA                         NA
3                          NA                         NA
4                          NA                         NA
5                          NA                         NA
6                          NA                         NA
  results.TotalObsTimeNotes results.ResRepValue results.ResRepUnit
1                        NA                  NA                 NA
2                        NA                  NA                 NA
3                        NA                  NA                 NA
4                        NA                  NA                 NA
5                        NA                  NA                 NA
6                        NA                  NA                 NA
  results.ResRepValueSI results.ResRepUnitSI        results.LocationText
1                    NA                   NA Nonsan-si Republic of Korea
2                    NA                   NA Nonsan-si Republic of Korea
3                    NA                   NA Nonsan-si Republic of Korea
4                    NA                   NA Nonsan-si Republic of Korea
5                    NA                   NA Nonsan-si Republic of Korea
6                    NA                   NA Nonsan-si Republic of Korea
  results.LocationType results.OriginalLocationDate results.LocationDate
1                field                           NA           2009-01-01
2                field                           NA           2009-01-01
3                field                           NA           2009-01-01
4                field                           NA           2009-01-01
5                field                           NA           2009-01-01
6                field                           NA           2009-01-01
  results.LocationDatePrecision results.CoordinateType results.Latitude
1                             1                decimal             36.5
2                             1                decimal             36.5
3                             1                decimal             36.5
4                             1                decimal             36.5
5                             1                decimal             36.5
6                             1                decimal             36.5
  results.Longitude results.Interactor1 results.Interactor1Common
1            126.75 Acyrthosiphon pisum                 Pea aphid
2            126.75 Acyrthosiphon pisum                 Pea aphid
3            126.75 Acyrthosiphon pisum                 Pea aphid
4            126.75 Acyrthosiphon pisum                 Pea aphid
5            126.75 Acyrthosiphon pisum                 Pea aphid
6            126.75 Acyrthosiphon pisum                 Pea aphid
  results.Interactor1Wholepart results.Interactor1WholePartType
1                           NA                               NA
2                           NA                               NA
3                           NA                               NA
4                           NA                               NA
5                           NA                               NA
6                           NA                               NA
  results.Interactor1Number results.Interactor1Kingdom
1                        39                   Animalia
2                        53                   Animalia
3                        45                   Animalia
4                        42                   Animalia
5                         8                   Animalia
6                        50                   Animalia
  results.Interactor1Phylum results.Interactor1Class results.Interactor1Order
1                Arthropoda                  Insecta                Hemiptera
2                Arthropoda                  Insecta                Hemiptera
3                Arthropoda                  Insecta                Hemiptera
4                Arthropoda                  Insecta                Hemiptera
5                Arthropoda                  Insecta                Hemiptera
6                Arthropoda                  Insecta                Hemiptera
  results.Interactor1Family results.Interactor1Genus results.Interactor1Species
1                 Aphididae            Acyrthosiphon                      pisum
2                 Aphididae            Acyrthosiphon                      pisum
3                 Aphididae            Acyrthosiphon                      pisum
4                 Aphididae            Acyrthosiphon                      pisum
5                 Aphididae            Acyrthosiphon                      pisum
6                 Aphididae            Acyrthosiphon                      pisum
  results.Interactor1Stage results.Interactor1Sex results.Interactor1Temp
1                 juvenile                   &lt;NA&gt;                      10
2                 juvenile                   &lt;NA&gt;                      15
3                 juvenile                   &lt;NA&gt;                      20
4                 juvenile                   &lt;NA&gt;                      25
5                 juvenile                   &lt;NA&gt;                      30
6                    adult                 female                      10
  results.Interactor1TempUnit results.Interactor1TempMethod
1                     Celsius                            NA
2                     Celsius                            NA
3                     Celsius                            NA
4                     Celsius                            NA
5                     Celsius                            NA
6                     Celsius                            NA
  results.Interactor1GrowthTemp results.Interactor1GrowthTempUnit
1                            NA                              &lt;NA&gt;
2                            NA                              &lt;NA&gt;
3                            NA                              &lt;NA&gt;
4                            NA                              &lt;NA&gt;
5                            NA                              &lt;NA&gt;
6                            NA                              &lt;NA&gt;
  results.Interactor1GrowthDur results.Interactor1GrowthdDurUnit
1                           NA                                NA
2                           NA                                NA
3                           NA                                NA
4                           NA                                NA
5                           NA                                NA
6                           NA                                NA
  results.Interactor1GrowthType results.Interactor1Acc
1                            NA                     NA
2                            NA                     NA
3                            NA                     NA
4                            NA                     NA
5                            NA                     NA
6                            NA                     NA
  results.Interactor1AccTemp results.Interactor1AccTempNotes
1                         NA                              NA
2                         NA                              NA
3                         NA                              NA
4                         NA                              NA
5                         NA                              NA
6                         NA                              NA
  results.Interactor1AccTime results.Interactor1AccTimeNotes
1                         NA                              NA
2                         NA                              NA
3                         NA                              NA
4                         NA                              NA
5                         NA                              NA
6                         NA                              NA
  results.Interactor1AccTimeUnit results.Interactor1OrigTemp
1                             NA                          NA
2                             NA                          NA
3                             NA                          NA
4                             NA                          NA
5                             NA                          NA
6                             NA                          NA
  results.Interactor1OrigTempNotes results.Interactor1OrigTime
1                               NA                          NA
2                               NA                          NA
3                               NA                          NA
4                               NA                          NA
5                               NA                          NA
6                               NA                          NA
  results.Interactor1OrigTimeNotes results.Interactor1OrigTimeUnit
1                               NA                              NA
2                               NA                              NA
3                               NA                              NA
4                               NA                              NA
5                               NA                              NA
6                               NA                              NA
  results.Interactor1EquilibTimeValue results.Interactor1EquilibTimeUnit
1                                  NA                                 NA
2                                  NA                                 NA
3                                  NA                                 NA
4                                  NA                                 NA
5                                  NA                                 NA
6                                  NA                                 NA
  results.Interactor1Size results.Interactor1SizeUnit
1                      NA                          NA
2                      NA                          NA
3                      NA                          NA
4                      NA                          NA
5                      NA                          NA
6                      NA                          NA
  results.Interactor1SizeType results.Interactor1SizeSI
1                          NA                        NA
2                          NA                        NA
3                          NA                        NA
4                          NA                        NA
5                          NA                        NA
6                          NA                        NA
  results.Interactor1SizeUnitSI results.Interactor1DenValue
1                            NA                          NA
2                            NA                          NA
3                            NA                          NA
4                            NA                          NA
5                            NA                          NA
6                            NA                          NA
  results.Interactor1DenUnit results.Interactor1DenTypeSI
1                         NA                           NA
2                         NA                           NA
3                         NA                           NA
4                         NA                           NA
5                         NA                           NA
6                         NA                           NA
  results.Interactor1DenValueSI results.Interactor1DenUnitSI
1                            NA                           NA
2                            NA                           NA
3                            NA                           NA
4                            NA                           NA
5                            NA                           NA
6                            NA                           NA
  results.Interactor1MassValueSI results.Interactor1MassUnitSI
1                             NA                            NA
2                             NA                            NA
3                             NA                            NA
4                             NA                            NA
5                             NA                            NA
6                             NA                            NA
  results.Interactor2 results.Interactor2Common results.Interactor2Kingdom
1           None None                        NA                         NA
2           None None                        NA                         NA
3           None None                        NA                         NA
4           None None                        NA                         NA
5           None None                        NA                         NA
6           None None                        NA                         NA
  results.Interactor2Phylum results.Interactor2Class results.Interactor2Order
1                        NA                       NA                       NA
2                        NA                       NA                       NA
3                        NA                       NA                       NA
4                        NA                       NA                       NA
5                        NA                       NA                       NA
6                        NA                       NA                       NA
  results.Interactor2Family results.Interactor2Genus results.Interactor2Species
1                        NA                       NA                         NA
2                        NA                       NA                         NA
3                        NA                       NA                         NA
4                        NA                       NA                         NA
5                        NA                       NA                         NA
6                        NA                       NA                         NA
  results.Interactor2Stage results.Interactor2Sex results.Interactor2Temp
1                       NA                     NA                      NA
2                       NA                     NA                      NA
3                       NA                     NA                      NA
4                       NA                     NA                      NA
5                       NA                     NA                      NA
6                       NA                     NA                      NA
  results.Interactor2TempUnit results.Interactor2TempMethod
1                          NA                            NA
2                          NA                            NA
3                          NA                            NA
4                          NA                            NA
5                          NA                            NA
6                          NA                            NA
  results.Interactor2GrowthTemp results.Interactor2GrowthTempUnit
1                            NA                                NA
2                            NA                                NA
3                            NA                                NA
4                            NA                                NA
5                            NA                                NA
6                            NA                                NA
  results.Interactor2GrowthDur results.Interactor2GrowthDurUnit
1                           NA                               NA
2                           NA                               NA
3                           NA                               NA
4                           NA                               NA
5                           NA                               NA
6                           NA                               NA
  results.Interactor2GrowthType results.Interactor2Acc
1                            NA                     NA
2                            NA                     NA
3                            NA                     NA
4                            NA                     NA
5                            NA                     NA
6                            NA                     NA
  results.Interactor2AccTemp results.Interactor2AccTempNotes
1                         NA                              NA
2                         NA                              NA
3                         NA                              NA
4                         NA                              NA
5                         NA                              NA
6                         NA                              NA
  results.Interactor2AccTime results.Interactor2AccTimeNotes
1                         NA                              NA
2                         NA                              NA
3                         NA                              NA
4                         NA                              NA
5                         NA                              NA
6                         NA                              NA
  results.Interactor2AccTimeUnit results.Interactor2OrigTemp
1                             NA                          NA
2                             NA                          NA
3                             NA                          NA
4                             NA                          NA
5                             NA                          NA
6                             NA                          NA
  results.Interactor2OrigTempNotes results.Interactor2OrigTime
1                               NA                          NA
2                               NA                          NA
3                               NA                          NA
4                               NA                          NA
5                               NA                          NA
6                               NA                          NA
  results.Interactor2OrigTimeNotes results.Interactor2OrigTimeUnit
1                               NA                              NA
2                               NA                              NA
3                               NA                              NA
4                               NA                              NA
5                               NA                              NA
6                               NA                              NA
  results.Interactor2EquilibTimeValue results.Interactor2EquilibTimeUnit
1                                  NA                                 NA
2                                  NA                                 NA
3                                  NA                                 NA
4                                  NA                                 NA
5                                  NA                                 NA
6                                  NA                                 NA
  results.Interactor2Size results.Interactor2SizeUnit
1                      NA                          NA
2                      NA                          NA
3                      NA                          NA
4                      NA                          NA
5                      NA                          NA
6                      NA                          NA
  results.Interactor2SizeType results.Interactor2SizeSI
1                          NA                        NA
2                          NA                        NA
3                          NA                        NA
4                          NA                        NA
5                          NA                        NA
6                          NA                        NA
  results.Interactor2SizeUnitSI results.Interactor2DenValue
1                            NA                          NA
2                            NA                          NA
3                            NA                          NA
4                            NA                          NA
5                            NA                          NA
6                            NA                          NA
  results.Interactor2DenUnit results.Interactor2DenTypeSI
1                         NA                           NA
2                         NA                           NA
3                         NA                           NA
4                         NA                           NA
5                         NA                           NA
6                         NA                           NA
  results.Interactor2DenValueSI results.Interactor2DenUnitSI
1                            NA                           NA
2                            NA                           NA
3                            NA                           NA
4                            NA                           NA
5                            NA                           NA
6                            NA                           NA
  results.Interactor2MassValueSI results.Interactor2MassUnitSI
1                             NA                            NA
2                             NA                            NA
3                             NA                            NA
4                             NA                            NA
5                             NA                            NA
6                             NA                            NA
  results.PhysicalProcess results.PhysicalProcess_1 results.PhysicalProcess_2
1                      NA                        NA                        NA
2                      NA                        NA                        NA
3                      NA                        NA                        NA
4                      NA                        NA                        NA
5                      NA                        NA                        NA
6                      NA                        NA                        NA
  results.FigureTable
1             table 1
2             table 1
3             table 1
4             table 1
5             table 1
6             table 1
                                                                                                                               results.Citation
1 Ahn et al. 2020. Thermal effects on the population parameters and growth of Acyrthosiphon pisum (Harris) (Hemiptera: Aphididae). Insects 11:8
2 Ahn et al. 2020. Thermal effects on the population parameters and growth of Acyrthosiphon pisum (Harris) (Hemiptera: Aphididae). Insects 11:8
3 Ahn et al. 2020. Thermal effects on the population parameters and growth of Acyrthosiphon pisum (Harris) (Hemiptera: Aphididae). Insects 11:8
4 Ahn et al. 2020. Thermal effects on the population parameters and growth of Acyrthosiphon pisum (Harris) (Hemiptera: Aphididae). Insects 11:8
5 Ahn et al. 2020. Thermal effects on the population parameters and growth of Acyrthosiphon pisum (Harris) (Hemiptera: Aphididae). Insects 11:8
6 Ahn et al. 2020. Thermal effects on the population parameters and growth of Acyrthosiphon pisum (Harris) (Hemiptera: Aphididae). Insects 11:8
  results.CuratedByCitation results.CuratedByDOI             results.DOI
1                        NA                   NA 10.3390/insects11080481
2                        NA                   NA 10.3390/insects11080481
3                        NA                   NA 10.3390/insects11080481
4                        NA                   NA 10.3390/insects11080481
5                        NA                   NA 10.3390/insects11080481
6                        NA                   NA 10.3390/insects11080481
  results.SubmittedBy results.ContributorEmail              results.Notes
1         Paul Huxley         phuxly@gmail.com reared on faba bean leaves
2         Paul Huxley         phuxly@gmail.com reared on faba bean leaves
3         Paul Huxley         phuxly@gmail.com reared on faba bean leaves
4         Paul Huxley         phuxly@gmail.com reared on faba bean leaves
5         Paul Huxley         phuxly@gmail.com reared on faba bean leaves
6         Paul Huxley         phuxly@gmail.com reared on faba bean leaves
  results.DefaultChartXaxis results.DefaultChartCategory
1           Interactor1Temp                 LocationText
2           Interactor1Temp                 LocationText
3           Interactor1Temp                 LocationText
4           Interactor1Temp                 LocationText
5           Interactor1Temp                 LocationText
6           Interactor1Temp                 LocationText</code></pre>
</div>
</div>
</section>
<section id="remove-unneeded-prefixes-from-column-names" class="level3">
<h3 class="anchored" data-anchor-id="remove-unneeded-prefixes-from-column-names">Remove unneeded prefixes from column names</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>datasets1to10 <span class="ot">&lt;-</span> datasets1to10 <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">colnames&lt;-</span><span class="st">`</span>(<span class="fu">str_to_lower</span>(<span class="fu">colnames</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">colnames&lt;-</span><span class="st">`</span>(<span class="fu">str_remove</span>(<span class="fu">colnames</span>(.), <span class="st">"(results)"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">colnames&lt;-</span><span class="st">`</span>(<span class="fu">str_remove</span>(<span class="fu">colnames</span>(.), <span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="search-for-and-list-datasets-on-a-specific-genus" class="level2">
<h2 class="anchored" data-anchor-id="search-for-and-list-datasets-on-a-specific-genus">Search for and list datasets on a specific genus</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>list_of_AedesDatasets <span class="ot">&lt;-</span> <span class="fu">searchDatasets</span>(<span class="st">"Aedes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
80 relevant datasets found.
You may not retrieve more than 50 datasets at a time.
Would you like to retrieve only the first 50 datasets?</code></pre>
</div>
</div>
<p><br> This will prompt you with something like the following:</p>
<p><br> <strong><em>“Searching Datasets…. 80 relevant datasets found. You may not retrieve more than 50 datasets at a time. Would you like to retrieve only the first 50 datasets?”</em></strong> <br></p>
<p>To which you can respond with “Y” and run the following code to …</p>
<section id="print-a-list-of-datasets-on-aedes-mosquitoes" class="level3">
<h3 class="anchored" data-anchor-id="print-a-list-of-datasets-on-aedes-mosquitoes">Print a list of datasets on <em>Aedes</em> mosquitoes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_of_AedesDatasets)) {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(list_of_AedesDatasets[[i]]<span class="sc">$</span>results<span class="sc">$</span>DatasetID[<span class="dv">1</span>])</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> You can then use the code above to pull all of the data that’s currently in VecTraits on <em>Aedes</em></p>
</section>
<section id="other-options" class="level3">
<h3 class="anchored" data-anchor-id="other-options">Other options</h3>
<section id="retrieve-multiple-datasets-by-their-ids" class="level4">
<h4 class="anchored" data-anchor-id="retrieve-multiple-datasets-by-their-ids">Retrieve Multiple Datasets by Their IDs</h4>
<p>Format:</p>
<p><code>list_of_dataframes &lt;- getDatasets(&lt;Vector, List, or Range of IDs&gt;)</code></p>
<p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">getDatasets</span>(<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">35</span>)) <span class="co"># Get datasets 10, 20, and 35</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>This will take about 4 seconds.
Retrieving datasets....
=&gt; 33.33 %=&gt; 66.66 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">getDatasets</span>(<span class="fu">seq</span>(<span class="dv">200</span>, <span class="dv">240</span>, <span class="dv">10</span>)) <span class="co"># Get datasets 200, 210, 220, 230, and 240</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>This will take about 6 seconds.
Retrieving datasets....
=&gt; 20 %=&gt; 40 %=&gt; 60 %=&gt; 80 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">getDatasets</span>(<span class="fu">list</span>(<span class="dv">50</span>, <span class="dv">1</span>, <span class="dv">580</span>, <span class="dv">20</span>)) <span class="co"># Get datasets 1, 20, 50, and 580</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>This will take about 5 seconds.
Retrieving datasets....
=&gt; 25 %=&gt; 50 %=&gt; 75 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">getDatasets</span>(<span class="dv">320</span><span class="sc">:</span><span class="dv">324</span>) <span class="co"># Get datasets 320, 321, 322, 323, and 324</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>This will take about 6 seconds.
Retrieving datasets....
=&gt; 20 %=&gt; 40 %=&gt; 60 %=&gt; 80 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
</div>
</section>
</section>
<section id="retrieve-list-of-datasets-related-to-keyword" class="level3">
<h3 class="anchored" data-anchor-id="retrieve-list-of-datasets-related-to-keyword">Retrieve List of Datasets Related To Keyword</h3>
<p>Format: <code>list_of_dataframes &lt;- searchDatasets(&lt;Keyword&gt;)</code></p>
<p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">searchDatasets</span>(<span class="st">"tiger mosquito"</span>) <span class="co"># Get datasets related to tiger mosquitos</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
17 relevant datasets found.
This will take about 21 seconds.
Retrieving datasets....
=&gt; 5.88 %=&gt; 11.76 %=&gt; 17.64 %=&gt; 23.52 %=&gt; 29.41 %=&gt; 35.29 %=&gt; 41.17 %=&gt; 47.05 %=&gt; 52.94 %=&gt; 58.82 %=&gt; 64.7 %=&gt; 70.58 %=&gt; 76.47 %=&gt; 82.35 %=&gt; 88.23 %=&gt; 94.11 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
</div>
</section>
<section id="retrieve-list-of-datasets-related-to-multiple-keywords" class="level3">
<h3 class="anchored" data-anchor-id="retrieve-list-of-datasets-related-to-multiple-keywords">Retrieve List of Datasets Related To Multiple Keywords</h3>
<p>Format: <code>list_of_dataframes &lt;- searchDatasetsMulti(&lt;Vector or List of Keywords&gt;)</code></p>
<p>Examples:</p>
<p>(All the following retrieve datasets related to yellow fever &amp; terrestrial areas in North Carolina)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">searchDatasetsMulti</span>(<span class="fu">c</span>(<span class="st">"terrestrial"</span>, <span class="st">"north carolina"</span>, <span class="st">"yellow fever"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
3 relevant datasets found.
This will take about 4 seconds.
Retrieving datasets....
=&gt; 33.33 %=&gt; 66.66 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">searchDatasetsMulti</span>(<span class="fu">list</span>(<span class="st">"terrestrial"</span>, <span class="st">"north carolina"</span>, <span class="st">"yellow fever"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
3 relevant datasets found.
This will take about 4 seconds.
Retrieving datasets....
=&gt; 33.33 %=&gt; 66.66 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">searchDatasetsMulti</span>(<span class="fu">c</span>(<span class="st">"TERRESTRIAL"</span>, <span class="st">"NORTH CAROLINA"</span>, <span class="st">"YELLOW FEVER"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
3 relevant datasets found.
This will take about 4 seconds.
Retrieving datasets....
=&gt; 33.33 %=&gt; 66.66 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">searchDatasetsMulti</span>(<span class="fu">list</span>(<span class="st">"tERRestRiAL"</span>, <span class="st">"NoRTh CARoLina"</span>, <span class="st">"YELLow feVer"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
3 relevant datasets found.
This will take about 4 seconds.
Retrieving datasets....
=&gt; 33.33 %=&gt; 66.66 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
</div>
</section>
<section id="retrieve-list-of-datasets-by-column-values" class="level3">
<h3 class="anchored" data-anchor-id="retrieve-list-of-datasets-by-column-values">Retrieve List of Datasets By Column Values</h3>
<p>Format:</p>
<p><code>list_of_dataframes &lt;- smartSearch(&lt;Column Name&gt;, &lt;Column Value&gt;, &lt;Optional Operator&gt;)</code></p>
<p>Examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">smartSearch</span>(<span class="st">"Interactor1Genus"</span>, <span class="st">"culex"</span>) <span class="co"># Datasets with genus Culex</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
17 relevant datasets found.
This will take about 21 seconds.
Retrieving datasets....
=&gt; 5.88 %=&gt; 11.76 %=&gt; 17.64 %=&gt; 23.52 %=&gt; 29.41 %=&gt; 35.29 %=&gt; 41.17 %=&gt; 47.05 %=&gt; 52.94 %=&gt; 58.82 %=&gt; 64.7 %=&gt; 70.58 %=&gt; 76.47 %=&gt; 82.35 %=&gt; 88.23 %=&gt; 94.11 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">smartSearch</span>(<span class="st">"SubmittedBy"</span>, <span class="st">"Lachance"</span>) <span class="co"># Datasets submitted by Lachance</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
22 relevant datasets found.
This will take about 27 seconds.
Retrieving datasets....
=&gt; 4.54 %=&gt; 9.09 %=&gt; 13.63 %=&gt; 18.18 %=&gt; 22.72 %=&gt; 27.27 %=&gt; 31.81 %=&gt; 36.36 %=&gt; 40.9 %=&gt; 45.45 %=&gt; 50 %=&gt; 54.54 %=&gt; 59.09 %=&gt; 63.63 %=&gt; 68.18 %=&gt; 72.72 %=&gt; 77.27 %=&gt; 81.81 %=&gt; 86.36 %=&gt; 90.9 %=&gt; 95.45 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">smartSearch</span>(<span class="st">"Interactor2Species"</span>, <span class="st">"null"</span>, <span class="st">"neq"</span>) <span class="co"># Datasets with second interactor</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
54 relevant datasets found.
You may not retrieve more than 50 datasets at a time.
Would you like to retrieve only the first 50 datasets?</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">smartSearch</span>(<span class="st">"OriginalTraitName"</span>, <span class="st">"survival"</span>, <span class="st">"eq"</span>) <span class="co"># Datasets strictly about survival</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
75 relevant datasets found.
You may not retrieve more than 50 datasets at a time.
Would you like to retrieve only the first 50 datasets?</code></pre>
</div>
</div>
</section>
<section id="the-pick-function" class="level3">
<h3 class="anchored" data-anchor-id="the-pick-function">The <code>pick()</code> Function</h3>
<p>If all the information above was too much and there’s no way you’re going to remember it, all you need to know is the <code>pick()</code> function. The <code>pick()</code> function displays a small menu and allows you to choose an option in order for you to find and retrieve whatever dataset(s) you may be looking for.</p>
<p>Format:</p>
<p><code>x &lt;- pick()</code></p>
</section>
<section id="access-dataframes-in-lists" class="level3">
<h3 class="anchored" data-anchor-id="access-dataframes-in-lists">Access Dataframes In Lists</h3>
<p>When multiple datasets are retrieved and stored in a list of dataframes, you can access individual datasets with the following format:</p>
<p><code>first_dataframe &lt;- list_of_dataframes[[1]]</code></p>
<p><code>second_dataframe &lt;- list_of_dataframes[[2]]</code></p>
<p>…and so on for every dataframe in the list.</p>
<p>Example:</p>
<p>To print a list of the names of those who contributed to the datasets related to tiger mosquitos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>list_of_dataframes <span class="ot">&lt;-</span> <span class="fu">searchDatasets</span>(<span class="st">"tiger mosquito"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Searching Datasets....
17 relevant datasets found.
This will take about 21 seconds.
Retrieving datasets....
=&gt; 5.88 %=&gt; 11.76 %=&gt; 17.64 %=&gt; 23.52 %=&gt; 29.41 %=&gt; 35.29 %=&gt; 41.17 %=&gt; 47.05 %=&gt; 52.94 %=&gt; 58.82 %=&gt; 64.7 %=&gt; 70.58 %=&gt; 76.47 %=&gt; 82.35 %=&gt; 88.23 %=&gt; 94.11 %=&gt; 100 % 100%
Data retrieval complete!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_of_dataframes)) {</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(list_of_dataframes[[i]]<span class="sc">$</span>results<span class="sc">$</span>SubmittedBy[<span class="dv">1</span>])</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Lauren Chapman"
[1] "Paul Huxley"
[1] "Paul Huxley"
[1] "Lauren Chapman"
[1] "Lauren Chapman"
[1] "Lauren Chapman"</code></pre>
</div>
</div>
</section>
<section id="access-data-in-dataframes" class="level3">
<h3 class="anchored" data-anchor-id="access-data-in-dataframes">Access Data In Dataframes</h3>
<p>To access variable <code>x</code> in row <code>y</code> of a dataset stored as a dataframe, use the <code>$</code> symbol and square brackets <code>[]</code>:</p>
<p><code>variable_value &lt;- dataframe$results$x[y]</code></p>
<p>For example, if you had a dataset stored as a dataframe and you wanted to know the Genus of Interactor 1 in the fifth row, you could get that with the following code:</p>
<p><code>dataframe$results$Interactor1Genus[5]</code></p>
<p>The same format also works for dataframes in lists. For example, you could run the following to get the original trait value in row 3 of the fourth dataset in the list:</p>
<p><code>list_of_dataframes[[4]]$results$OriginalTraitValue[3]</code></p>
<p>The same format also works on raw functions, although it is recommended that retrieved datasets are immediately stored in an <code>R</code> object:</p>
<p><code>getDataset(5)$results$SubmittedBy[1] # Name of person who submitted the dataset with ID 5</code></p>
</section>
<section id="minor-additional-functions" class="level3">
<h3 class="anchored" data-anchor-id="minor-additional-functions">Minor Additional Functions</h3>
<p><code>datasetSummary(DATASET)</code></p>
<p>Summary: Prints summary of data within dataset Parameters: DATASET = A dataset as a dataframe, such as getDataset(1) Returns: Nothing</p>
<p><code>sciName(DATASET)</code></p>
<p>Summary: Finds the scientific name of the main interactor within the dataset Parameters: DATASET = A dataset as a dataframe, such as getDataset(1) Returns: Scientific Name of main interactor within dataset, as string</p>
<p><code>datasetRows(DATASET)</code></p>
<p>Summary: Finds the number of rows/samples in a dataset Parameters: DATASET = A dataset as a dataframe, such as getDataset(1) Returns: Number of rows, as integer</p>
<p><code>datasetColumns(DATASET)</code></p>
<p>Summary: Finds the number of columns/variables in a dataset Parameters: DATASET = A dataset as a dataframe, such as getDataset(1) Returns: Number of columns, as integer</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>